<Window x:Class="BuhWise.HistoryWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="История изменений"
        Height="400"
        Width="800"
        WindowStartupLocation="CenterOwner"
        Background="#1E1E1E"
        Foreground="White">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <DataGrid x:Name="HistoryGrid"
                  AutoGenerateColumns="False"
                  ScrollViewer.HorizontalScrollBarVisibility="Auto"
                  ScrollViewer.VerticalScrollBarVisibility="Auto"
                  Background="#202020"
                  Foreground="#EEEEEE"
                  RowBackground="#202020"
                  AlternatingRowBackground="#2A2A2A"
                  AlternationCount="2"
                  BorderBrush="#444444"
                  GridLinesVisibility="All"
                  HorizontalGridLinesBrush="#444444"
                  VerticalGridLinesBrush="#444444"
                  HeadersVisibility="Column"
                  IsReadOnly="True"
                  CanUserAddRows="False"
                  SelectionMode="Single"
                  SelectionChanged="HistoryGrid_SelectionChanged">
            <DataGrid.Resources>
                <Style TargetType="DataGridRow">
                    <Setter Property="Foreground" Value="#EEEEEE" />
                    <Setter Property="Background" Value="#202020" />
                    <Setter Property="BorderBrush" Value="#444444" />
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="#2E2E32" />
                        </Trigger>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="#4A90E2" />
                            <Setter Property="Foreground" Value="Black" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
                <Style TargetType="DataGridCell">
                    <Setter Property="Foreground" Value="#EEEEEE" />
                    <Setter Property="Background" Value="{x:Null}" />
                    <Setter Property="BorderBrush" Value="#444444" />
                    <Setter Property="BorderThickness" Value="0.5" />
                    <Style.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" Value="#333337" />
                        </Trigger>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Foreground" Value="Black" />
                            <Setter Property="Background" Value="{x:Null}" />
                        </Trigger>
                    </Style.Triggers>
                </Style>
                <Style TargetType="DataGridColumnHeader">
                    <Setter Property="Foreground" Value="White" />
                    <Setter Property="Background" Value="#303030" />
                    <Setter Property="BorderBrush" Value="#444444" />
                    <Setter Property="BorderThickness" Value="0,0,0,1" />
                </Style>
            </DataGrid.Resources>
            <DataGrid.Columns>
                <DataGridTextColumn Header="Дата/время" Binding="{Binding Timestamp, StringFormat=yyyy-MM-dd HH:mm:ss}" Width="160" />
                <DataGridTextColumn Header="Действие" Binding="{Binding Action}" Width="100" />
                <DataGridTextColumn Header="Id операции" Binding="{Binding OperationId}" Width="120" />
                <DataGridTextColumn Header="Причина" Binding="{Binding Reason}" Width="150" />
                <DataGridTextColumn Header="Детали" Binding="{Binding Details}" Width="*" />
            </DataGrid.Columns>
        </DataGrid>

        <StackPanel Grid.Row="1"
                    Orientation="Horizontal"
                    HorizontalAlignment="Right"
                    Margin="0 8 0 0">
            <Button x:Name="RestoreButton"
                    Content="Восстановить операцию"
                    Padding="12,6"
                    IsEnabled="False"
                    Click="RestoreButton_Click" />
        </StackPanel>
    </Grid>
</Window>
