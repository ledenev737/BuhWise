<Window x:Class="BuhWise.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="BuhWise" Height="600" Width="900" Background="#1E1E1E" Foreground="White">
    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Balance cards -->
        <UniformGrid Columns="3" Margin="0 0 0 16">
            <Border Background="#2D2D30" Padding="12" CornerRadius="6" Margin="4">
                <StackPanel>
                    <TextBlock Text="USD" FontSize="16" FontWeight="Bold" />
                    <TextBlock x:Name="UsdBalance" FontSize="20" />
                </StackPanel>
            </Border>
            <Border Background="#2D2D30" Padding="12" CornerRadius="6" Margin="4">
                <StackPanel>
                    <TextBlock Text="EUR" FontSize="16" FontWeight="Bold" />
                    <TextBlock x:Name="EurBalance" FontSize="20" />
                </StackPanel>
            </Border>
            <Border Background="#2D2D30" Padding="12" CornerRadius="6" Margin="4">
                <StackPanel>
                    <TextBlock Text="RUB" FontSize="16" FontWeight="Bold" />
                    <TextBlock x:Name="RubBalance" FontSize="20" />
                </StackPanel>
            </Border>
        </UniformGrid>

        <!-- Operation entry form -->
        <Border Grid.Row="1" Background="#2D2D30" Padding="12" CornerRadius="6" Margin="0 0 0 16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <StackPanel Orientation="Vertical" Margin="4" Grid.Column="0" Grid.Row="0">
                    <TextBlock Text="Тип операции" Margin="0 0 0 4" />
                    <ComboBox x:Name="OperationTypeBox" SelectedIndex="0" Height="28" SelectionChanged="OperationTypeBox_SelectionChanged">
                        <ComboBoxItem Content="Пополнение" Tag="Income" />
                        <ComboBoxItem Content="Расход" Tag="Expense" />
                        <ComboBoxItem Content="Обмен" Tag="Exchange" />
                    </ComboBox>
                </StackPanel>

                <StackPanel Orientation="Vertical" Margin="4" Grid.Column="1" Grid.Row="0">
                    <TextBlock Text="Исходная валюта" Margin="0 0 0 4" />
                    <ComboBox x:Name="SourceCurrencyBox" SelectedIndex="0" Height="28">
                        <ComboBoxItem Content="USD" Tag="USD" />
                        <ComboBoxItem Content="EUR" Tag="EUR" />
                        <ComboBoxItem Content="RUB" Tag="RUB" />
                    </ComboBox>
                </StackPanel>

                <StackPanel Orientation="Vertical" Margin="4" Grid.Column="2" Grid.Row="0">
                    <TextBlock Text="Конечная валюта" Margin="0 0 0 4" />
                    <ComboBox x:Name="TargetCurrencyBox" SelectedIndex="1" Height="28">
                        <ComboBoxItem Content="USD" Tag="USD" />
                        <ComboBoxItem Content="EUR" Tag="EUR" />
                        <ComboBoxItem Content="RUB" Tag="RUB" />
                    </ComboBox>
                </StackPanel>

                <StackPanel Orientation="Vertical" Margin="4" Grid.Column="0" Grid.Row="1">
                    <TextBlock Text="Сумма" Margin="0 0 0 4" />
                    <TextBox x:Name="AmountBox" Height="28" />
                </StackPanel>

                <StackPanel Orientation="Vertical" Margin="4" Grid.Column="1" Grid.Row="1">
                    <TextBlock Text="Курс" Margin="0 0 0 4" />
                    <TextBox x:Name="RateBox" Height="28" />
                </StackPanel>

                <StackPanel Orientation="Vertical" Margin="4" Grid.Column="2" Grid.Row="1">
                    <TextBlock Text="Комиссия (опционально)" Margin="0 0 0 4" />
                    <TextBox x:Name="FeeBox" Height="28" />
                </StackPanel>

                <StackPanel Orientation="Vertical" Margin="4" Grid.Column="0" Grid.Row="2">
                    <TextBlock Text="Дата" Margin="0 0 0 4" />
                    <DatePicker x:Name="DateBox" SelectedDate="{x:Static sys:DateTime.Today}" Height="28" />
                </StackPanel>

                <StackPanel Orientation="Horizontal" Margin="4" Grid.Column="1" Grid.Row="2" Grid.ColumnSpan="2" VerticalAlignment="Bottom">
                    <Button Content="Добавить операцию" Click="AddOperation_Click" Height="32" Width="180" />
                </StackPanel>
            </Grid>
        </Border>

        <!-- Operations history -->
        <DataGrid Grid.Row="2"
                  x:Name="OperationsGrid"
                  AutoGenerateColumns="False"
                  ItemsSource="{Binding}"
                  Background="#1E1E1E"
                  Foreground="White"
                  GridLinesVisibility="Vertical"
                  HeadersVisibility="Column"
                  CanUserAddRows="False">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Дата" Binding="{Binding Date, StringFormat=yyyy-MM-dd}" Width="120" />
                <DataGridTextColumn Header="Тип" Binding="{Binding Type}" Width="80" />
                <DataGridTextColumn Header="Из" Binding="{Binding SourceCurrency}" Width="60" />
                <DataGridTextColumn Header="Сумма из" Binding="{Binding SourceAmount}" Width="100" />
                <DataGridTextColumn Header="В" Binding="{Binding TargetCurrency}" Width="60" />
                <DataGridTextColumn Header="Сумма в" Binding="{Binding TargetAmount}" Width="100" />
                <DataGridTextColumn Header="Курс" Binding="{Binding Rate}" Width="80" />
                <DataGridTextColumn Header="Комиссия" Binding="{Binding Commission}" Width="90" />
                <DataGridTextColumn Header="USD экв." Binding="{Binding UsdEquivalent}" Width="100" />
            </DataGrid.Columns>
        </DataGrid>
    </Grid>
</Window>
