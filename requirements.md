# Требования к приложению BuhWise

## Назначение
Приложение для Windows для учёта операций с тремя валютами: USD, EUR и RUB. Центральной валютой для эквивалентов и сводных отчётов выступает USD.

## Платформа и интерфейс
- Целевая платформа: Windows (.NET, WPF или WinForms).
- Тема: тёмная.
- Интерфейс: русский язык.
- Горячие клавиши: минимальный набор для создания и сохранения операций.

## Данные и хранение
- Локальная база данных SQLite.
- Экспорт данных в CSV/Excel (хотя бы CSV на MVP).
- Автоматическое резервное копирование файла БД при выходе или периодически.

## Типы операций
- **Пополнение (доход)**: увеличивает остаток выбранной валюты.
- **Списание (расход)**: уменьшает остаток выбранной валюты.
- **Обмен валюты**: уменьшает исходную валюту и увеличивает целевую валюту по заданному курсу с учётом комиссии (при наличии).

### Поля операции
- Дата
- Тип операции (пополнение/списание/обмен)
- Исходная валюта
- Сумма исходной валюты
- Конечная валюта (только для обмена)
- Сумма конечной валюты (фиксируется фактическим расчётом по курсу)
- Курс операции (фиксируется на момент операции)
- Комиссия: опционально, процент или фиксированная сумма
- Эквивалент в USD (фиксируется на момент операции)

## Учёт баланса
- Баланс хранит накопленные остатки по USD, EUR и RUB.
- В верхней части интерфейса отображаются три блока с текущими остатками и общей суммой в USD.
- Обновление баланса:
  - пополнение → прибавить сумму в выбранной валюте;
  - списание → вычесть сумму из выбранной валюты;
  - обмен → уменьшить исходную валюту и увеличить целевую валюту на рассчитанную сумму.

## Курс валют
- Курс фиксируется на момент создания операции и не пересчитывается ретроспективно.
- Изменение текущих курсов влияет только на сводный баланс и отчёты, но не на историю операций.
- Кнопка «обновить курсы» в первой версии открывает форму ручного ввода; архитектура должна позволять добавить API-провайдер в будущем.
- При вводе новой операции приложение подставляет последний использованный курс с возможностью редактирования.

## Обмен валюты
- Пользователь вводит сумму исходной валюты.
- Приложение умножает сумму на курс, получает сумму конечной валюты и сохраняет её в БД как фактический результат.
- Комиссия учитывается (если введена) и фиксируется на операции.

## Отчёты и фильтры
- Фильтрация по валюте, периоду (дата от/до) и типу операции.
- Отчёты по доходам, расходам и обменам с эквивалентом в USD.
- Сводный баланс с остатками по каждой валюте и общей суммой в USD.

## Дополнительно
- Категории или теги для доходов и расходов.
- Опциональный пароль на вход (не обязательно для MVP).
- Уведомления и напоминания не требуются в первой версии.
